---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Test IFRAME — TP3">
  <h1 class="text-3xl font-extrabold mb-4">
    Test IFRAME — Espèces de pingouins
  </h1>

  <nav class="flex flex-wrap gap-2 mb-4">
    <a
      href="/species/Adelie/"
      target="speciesFrame"
      class="inline-flex items-center rounded-full border border-gray-200 bg-white px-3 py-2 text-sm font-semibold shadow-sm hover:bg-gray-100"
      >Adelie</a
    >
    <a
      href="/species/Gentoo/"
      target="speciesFrame"
      class="inline-flex items-center rounded-full border border-gray-200 bg-white px-3 py-2 text-sm font-semibold shadow-sm hover:bg-gray-100"
      >Gentoo</a
    >
    <a
      href="/species/Chinstrap/"
      target="speciesFrame"
      class="inline-flex items-center rounded-full border border-gray-200 bg-white px-3 py-2 text-sm font-semibold shadow-sm hover:bg-gray-100"
      >Chinstrap</a
    >
  </nav>

  <div class="border border-gray-200 rounded-xl overflow-hidden">
    <iframe
      name="speciesFrame"
      src="/species/Adelie/"
      title="Graphique d'espèce"
      class="w-full h-[600px] block border-0"
      onload="resizeIframe(this)"></iframe>
  </div>

  <script>
    function resizeIframe(iframe) {
      try {
        const doc = iframe.contentDocument || iframe.contentWindow.document;
        const html = doc?.documentElement,
          body = doc?.body;
        const h = Math.max(
          body?.scrollHeight || 0,
          html?.scrollHeight || 0,
          body?.offsetHeight || 0,
          html?.offsetHeight || 0,
          body?.clientHeight || 0,
          html?.clientHeight || 0
        );
        iframe.style.height = h + 16 + "px";
      } catch (e) {}
    }
  </script>
</Layout>
