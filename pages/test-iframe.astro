---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <h1>Test IFRAME — Espèces de pingouins</h1>

  <nav class="nav-pills" aria-label="Espèces">
    <a href="/species/Adelie" target="speciesFrame">Adelie</a>
    <a href="/species/Gentoo" target="speciesFrame">Gentoo</a>
    <a href="/species/Chinstrap" target="speciesFrame">Chinstrap</a>
  </nav>

  <div style="border:1px solid #eee; border-radius:12px; overflow:hidden;">
    <iframe
      name="speciesFrame"
      src="/species/Adelie"
      title="Graphique d'espèce"
      style="width:100%; height:600px; border:0; display:block;"
      onload="resizeIframe(this)"></iframe>
  </div>

  <script>
    function resizeIframe(iframe) {
      try {
        const doc = iframe.contentDocument || iframe.contentWindow.document;
        if (!doc) return;
        const html = doc.documentElement,
          body = doc.body;
        const h = Math.max(
          body?.scrollHeight || 0,
          html?.scrollHeight || 0,
          body?.offsetHeight || 0,
          html?.offsetHeight || 0,
          body?.clientHeight || 0,
          html?.clientHeight || 0
        );
        iframe.style.height = h + 16 + "px";
      } catch (e) {
        console.warn("Redimensionnement iframe impossible :", e);
      }
    }
  </script>
</Layout>
